#edit-mode: -*- python -*-
#coding:gbk

#工作路径.
WORKROOT('../../')
CC('g++')

#C预处理器参数.
#CPPFLAGS('-D_GNU_SOURCE -D__STDC_LIMIT_MACROS -DVERSION=\\\"1.9.8.7\\\"')

#C编译参数.
CFLAGS('-pipe -fsigned-char -Wall -W -g -fPIC -Woverloaded-virtual')

#C++编译参数.
CXXFLAGS('-pipe -fsigned-char -Wall -W -g -fPIC -Woverloaded-virtual')

#IDL编译参数
#IDLFLAGS('--compack')

#UBRPC编译参数
#UBRPCFLAGS('--compack')

#头文件路径.
INCPATHS('. compiler/src')

#使用库
#LIBS('./libconfigure.a')

#链接参数.
#LDFLAGS('-lpthread -lcrypto -lrt')

#依赖模块
CONFIGS('lib2-64/bsl@bsl_1-1-8-0_PD_BL')
CONFIGS('lib2-64/ullib@ullib_3-1-43-2_PD_BL')
CONFIGS('public/spreg@spreg_1-0-3-0_PD_BL')
CONFIGS('third-64/pcre@pcre_7-7-0-0_PD_BL')

user_sources='FileReloader.cpp ConfigReloader.cpp CmdOption.cpp ConfigError.cpp ConfigGroup.cpp ConfigUnit.cpp Configure.cpp constraint/Constraint.cpp constraint/ConstraintFunction.cpp constraint/cc_default.cpp reader/RawData.cpp reader/Reader.cpp utils/init.cpp utils/trans.cpp cfgext.cpp cfgflag.cpp compiler/src/idl.c compiler/src/idl_lex.c compiler/src/idl_gram.c'
user_headers='ConfigGroup.h Configure.h ConfigReloader.h ConfigArray.h cfgext.h CmdOption.h ConfigUnit.h ConfigError.h FileReloader.h EnvGet.h cfgflag.h'

HEADERS('utils/*.h', '$INC/utils')
HEADERS('constraint/*.h', '$INC/constraint')
HEADERS('compiler/src/idl_conf_if.h', '$INC')
#可执行文件
#Application('configure',Sources(user_sources))
#静态库
StaticLibrary('config',Sources(user_sources),HeaderFiles(user_headers))
#共享库
#SharedLibrary('configure',Sources(user_sources),HeaderFiles(user_headers))
#子目录
#Directory('demo')


